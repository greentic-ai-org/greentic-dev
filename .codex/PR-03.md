# PR-03: greentic-dev — Add `pack new-provider` to register provider extensions via PackManifest.extensions

## Goal
Add a scaffolding/registration command that adds a new ProviderDecl into the provider extension stored in PackManifest.extensions. This replaces any prior “events pack” creation patterns.

## Dependencies
- greentic-types PR providing:
  - `PackManifest::ensure_provider_extension_inline()`
  - `ProviderDecl` type
  - `ProviderExtensionInline::validate_basic()`
  - `PROVIDER_EXTENSION_ID`

## CLI
Add:
`greentic-dev pack new-provider --pack <path> --id <provider_id> [--runtime <runtime_ref>] [--kind <string>] [--manifest <path>] [--dry-run] [--force] [--json]`

Notes:
- Only include flags that map to real fields on ProviderDecl/ProviderRuntimeRef/ProviderManifest.
- If ProviderDecl has a runtime ref type (e.g. ProviderRuntimeRef), accept `--runtime` and parse into that.
- If ProviderDecl supports external manifest reference, allow `--manifest` (relative path).

## Behavior
- Loads PackManifest from `--pack`.
- Ensures provider extension exists.
- If `--id` already exists:
  - fail unless `--force`, in which case update the existing entry.
- Adds/updates ProviderDecl with provided flags.
- Sort providers by id before writing back.
- `--dry-run`: print what would change, do not write.
- `--json`: print the resulting ProviderDecl (or whole provider extension) as JSON on success.

## Optional scaffolding (only if you want it now)
If ProviderDecl supports “manifest path” and you want to create a file:
- Create `providers/<slug>/provider.yaml` by serializing `ProviderManifest`
- Do NOT invent a new schema; use greentic-types struct serialization.
Keep this optional behind `--scaffold-files`.

## Tests
- temp dir pack fixture + write manifest
- run command, ensure provider extension updated
- duplicate id without force fails
- force updates runtime fields
- dry-run does not modify file

## Acceptance criteria
- Command edits PackManifest provider extension without hard-coded string keys.
- No provider-type duplication in greentic-dev.
- CI passes.
